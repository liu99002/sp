## 6.5 目標碼呈現（Target Code Generation）　(LLVM IR)

LLVM IR（Intermediate Representation）是一種低階的中間碼表示形式，用於在 LLVM 編譯器框架中進行目標碼生成。它是一個抽象的指令集，用於描述高階語言的程式碼。LLVM IR的主要目的是提供一個統一的、獨立於目標平台的表示形式，以便於進一步優化和轉譯成目標代碼。

LLVM IR提供了一個豐富的指令集，包括整數操作、浮點數操作、位操作、向量操作、記憶體操作等。它還支援各種控制流指令，例如條件分支、迴圈和函式調用。此外，LLVM IR還能夠進行高級優化，如優化控制流、循環展開、指令選擇等。

下面是一個示例，展示了一個簡單的C程式碼片段的LLVM IR表示：

```llvm
define i32 @main() {
  %1 = alloca i32
  store i32 0, i32* %1
  %2 = load i32, i32* %1
  %3 = add i32 %2, 42
  ret i32 %3
}
```

該片段定義了一個名為"main"的函式，返回一個32位整數。它首先在堆疊上分配一個32位整數變數，並將值0存儲在該變數中。然後，它對該變數進行加法操作，將結果存儲在另一個32位整數變數中。最後，它返回這個變數的值作為函式的結果。

這個LLVM IR示例展示了程式碼的底層表示形式，它可以被不同的LLVM工具進行進一步的優化和轉譯。LLVM框架提供了強大的工具和庫，使得可以使用LLVM IR編譯各種高階語言，產生高效的目標代碼。